<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.control.cell.*?>
<?import javafx.scene.layout.*?>
<AnchorPane xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="dicasa.estoque.controller.estoque.HistoricoEstoqueController"
            stylesheets="@historico-estoque.css">
    <BorderPane>

        <!-- TOPO -->
        <top>
            <VBox spacing="10" styleClass="caixa-topo">
                <HBox alignment="CENTER" spacing="10">
                    <Label styleClass="titulo-label" text="Relatório de Estoque" />
                </HBox>

                <!-- FILTROS - VERSÃO SIMPLIFICADA -->
                <HBox alignment="CENTER_LEFT" spacing="10" styleClass="caixa-filtro-pesquisa">
                    <Label styleClass="filtro-label" text="Filtrar por:" />
                    <!-- ComboBox vazios - serão preenchidos no controller -->
                    <ComboBox fx:id="produtoFilter" prefWidth="150" promptText="Produto" />

                    <Button styleClass="clear-filters-button" text="Limpar Filtros" />
                </HBox>
            </VBox>
        </top>

        <!-- LADO ESQUERDO (Resumo Estoque) -->
        <left>
            <VBox prefWidth="250" spacing="10" styleClass="caixa-resumo-produtos">
                <Label styleClass="titulo-resumo-produtos" text="Resumo por Produto" />

                <VBox spacing="5" styleClass="caixa-menor-resumo-produtos">
                    <HBox>
                        <Label styleClass="nome-produto-resumo-label" text="Produto A:" />
                        <Region HBox.hgrow="ALWAYS" />
                        <Label styleClass="quantidade-produto-resumo-label" text="350 un" />
                    </HBox>
                    <ProgressBar prefWidth="200" progress="0.7" />
                </VBox>
                <Separator />

                <Button styleClass="botao-gerar-relatorio" text="Gerar Relatório" />
            </VBox>
        </left>

        <!-- CENTRO (Tabela Consumo + Estoque) -->
        <center>
            <VBox spacing="10" styleClass="caixa-principal-estoque">

                <!-- RESUMO CONSUMO -->
                <HBox alignment="CENTER" spacing="20" styleClass="consumption-summary">
                    <Label styleClass="label-produtos-mais-consumidos" text="Total Consumido: 0 unidades" />
                    <Label styleClass="label-produtos-mais-consumidos" text="Valor Total: R$ 0,00" />
                    <Label styleClass="label-produtos-mais-consumidos" text="Produto Mais Consumido: Nenhum" />
                </HBox>

                <!-- TABELA -->
                <TableView fx:id="produtoTableView" styleClass="tabela-produtos-principal">
                    <columns>
                        <TableColumn prefWidth="200" text="Produto">
                            <cellValueFactory>
                                <PropertyValueFactory property="produto" />
                            </cellValueFactory>
                        </TableColumn>
                        <TableColumn prefWidth="200" text="Marca">
                            <cellValueFactory>
                                <PropertyValueFactory property="marca" />
                            </cellValueFactory>
                        </TableColumn>
                        <TableColumn prefWidth="120" text="Tipo">
                            <cellValueFactory>
                                <PropertyValueFactory property="tipo" />
                            </cellValueFactory>
                        </TableColumn>
                        <TableColumn prefWidth="100" text="Quantidade">
                            <cellValueFactory>
                                <PropertyValueFactory property="quantidade" />
                            </cellValueFactory>
                        </TableColumn>
                        <TableColumn prefWidth="120" text="Valor Unitário">
                            <cellValueFactory>
                                <PropertyValueFactory property="valorUnitario" />
                            </cellValueFactory>
                        </TableColumn>
                        <TableColumn prefWidth="120" text="Valor Total">
                            <cellValueFactory>
                                <PropertyValueFactory property="valorTotal" />
                            </cellValueFactory>
                        </TableColumn>
                        <TableColumn prefWidth="150" text="Fornecedor">
                            <cellValueFactory>
                                <PropertyValueFactory property="fornecedor" />
                            </cellValueFactory>
                        </TableColumn>
                    </columns>
                    <columnResizePolicy>
                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                    </columnResizePolicy>
                </TableView>

                <!-- BOTÕES -->
                <HBox alignment="CENTER" spacing="10" styleClass="buttons-hbox">
                    <Button styleClass="botao-gerar-pdf" text="Exportar para PDF" />
                    <Button styleClass="botao-gerar-excel" text="Exportar para Excel" />
                    <Button styleClass="botao-imprimir-relatorio" text="Imprimir" />
                </HBox>
            </VBox>
        </center>

        <!-- RODAPÉ -->
        <bottom>
            <HBox alignment="CENTER_RIGHT" spacing="10" styleClass="bottom-hbox">
                <Label styleClass="label-texto-baixo-estoque-total" text="Estoque Total Atual:" />
                <Label styleClass="label-valor-baixo-estoque-total" text="1.250 unidades" />
                <Region HBox.hgrow="ALWAYS" />
            </HBox>
        </bottom>

    </BorderPane>
</AnchorPane>
